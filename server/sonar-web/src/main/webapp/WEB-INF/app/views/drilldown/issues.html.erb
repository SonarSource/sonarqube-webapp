<script>
  var config = {
        metric: null,
        resource: '<%= @resource.uuid -%>',
        resourceQualifier: '<%= @resource.qualifier -%>',
        rule: <% if @rule %>'<%= @rule.key -%>'<% else %>null<% end %>,
        severity: <% if @severity %>'<%= @severity -%>'<% else %>null<% end %>,
        period: <% if @period %><%= @period -%><% else %>null<% end %>
      },
      url = baseUrl + '/issues/search#resolved=false|';
  if (config.resourceQualifier === 'TRK') {
    url = url + 'projectUuids=' + encodeURIComponent(config.resource);
  } else {
    url = url + 'componentRootUuids=' + encodeURIComponent(config.resource);
  }

  if (config.rule) {
    url = url + '|rules=' + config.rule;
  }
  if (config.severity) {
    url = url + '|severities=' + config.severity;
  }
  if (config.period) {
    url = url + '|createdAfter=' + config.period;
  }
  console.log(config);
  console.log(url);
  window.location = url;
</script>

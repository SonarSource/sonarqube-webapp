<% content_for :extra_script do %>
  <script>
    window.sonarqube.user = {
      login: '<%= escape_javascript current_user.login -%>',
      name: '<%= escape_javascript current_user.name -%>',
      email: '<%= escape_javascript current_user.email -%>',
      groups: [
        <% current_user.groups.sort.each do |group| -%>
          '<%= escape_javascript group.name -%>',
        <% end -%>
      ],
      scmAccounts: [
        <% current_user.full_scm_accounts.sort.each do |scm_account| -%>
          '<%= escape_javascript scm_account -%>',
        <% end -%>
      ],
      favorites: [
        <% current_user.favourites.each_with_index do |f, index| %>
        {
          id: '<%= escape_javascript f.uuid -%>',
          key: '<%= escape_javascript f.key -%>',
          name: '<%= escape_javascript f.name -%>',
          qualifier: '<%= escape_javascript f.qualifier -%>'
        },
        <% end %>
      ],
      favoriteMeasureFilters: [
        <% current_user.favourited_measure_filters.each do |filter| %>
        {
          id: <%= filter.id -%>,
          name: '<%= escape_javascript filter.name -%>'
        },
        <% end %>
      ]
    };
  </script>
  <script src="<%= ApplicationController.root_context -%>/js/bundles/account.js?v=<%= sonar_version -%>"></script>
<% end %>
